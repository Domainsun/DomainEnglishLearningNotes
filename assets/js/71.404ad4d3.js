(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{380:function(t,e,a){"use strict";a.r(e);var r=a(14),_=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"文件存储适配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件存储适配"}},[t._v("#")]),t._v(" 文件存储适配")]),t._v(" "),e("h2",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://juejin.cn/post/6862633674089693197#heading-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("掘金"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/qq_41466437/article/details/104970199",target:"_blank",rel:"noopener noreferrer"}},[t._v("目录对应位置和获取API"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"预备知识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预备知识"}},[t._v("#")]),t._v(" 预备知识")]),t._v(" "),e("h4",{attrs:{id:"targetsdkversion"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#targetsdkversion"}},[t._v("#")]),t._v(" targetSdKVersion")]),t._v(" "),e("h2",{attrs:{id:"目录分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录分类"}},[t._v("#")]),t._v(" 目录分类")]),t._v(" "),e("ul",[e("li",[t._v("私有目录\n"),e("ul",[e("li",[t._v("内部存储私有目录"),e("code",[t._v("(/data/data/packageName)")]),t._v(" ，通过getFilesDir()获取")]),t._v(" "),e("li",[t._v("外部存储私有目录 "),e("code",[t._v("(/sdcard/Android/data/packageName)")]),t._v("， 通过getExternalFilesDir获取目录")])])]),t._v(" "),e("li",[t._v("共享目录\n"),e("ul",[e("li",[t._v("媒体文件[DCIM、Pictures、Music、Movies]")]),t._v(" "),e("li",[t._v("非媒体文件[PDF、]")])])])]),t._v(" "),e("h2",{attrs:{id:"访问不同分区的方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问不同分区的方式"}},[t._v("#")]),t._v(" 访问不同分区的方式：")]),t._v(" "),e("ol",[e("li",[t._v("私有目录：和以前的版本一致，可通过 "),e("code",[t._v("File()")]),t._v(" API 访问，"),e("strong",[t._v("无需申请权限。")])]),t._v(" "),e("li",[t._v("共享目录：需要通过"),e("code",[t._v("MediaStore")]),t._v("和"),e("code",[t._v("Storage Access Framework")]),t._v(" API 访问。")])]),t._v(" "),e("h2",{attrs:{id:"共享目录需要权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#共享目录需要权限"}},[t._v("#")]),t._v(" 共享目录需要权限")]),t._v(" "),e("p",[t._v("对共享目录的权限进行了细分：")]),t._v(" "),e("ol",[e("li",[t._v("无需申请权限的操作：\n通过 "),e("code",[t._v("MediaStore API")]),t._v("对媒体集、文件集进行媒体/文件的添加、对 "),e("strong",[t._v("自身APP")]),t._v(" 创建的 媒体/文件 进行查询、修改、删除的操作。")]),t._v(" "),e("li",[t._v("需要申请"),e("code",[t._v("READ_EXTERNAL_STORAGE")]),t._v("权限：\n通过 "),e("code",[t._v("MediaStore API")]),t._v("对所有的媒体集进行查询、修改、删除的操作。")]),t._v(" "),e("li",[t._v("调用 "),e("code",[t._v("Storage Access Framework API")]),t._v(" ：\n会启动系统的文件选择器向用户申请操作指定的文件")])])])}),[],!1,null,null,null);e.default=_.exports}}]);