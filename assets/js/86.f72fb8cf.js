(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{392:function(n,e,s){"use strict";s.r(e);var t=s(14),r=Object(t.a)({},(function(){var n=this,e=n._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[n._v("#")]),n._v(" nginx")]),n._v(" "),e("p",[e("strong",[e("code",[n._v("Note")]),n._v("：当前"),e("code",[n._v("Nginx")]),n._v("版本为"),e("code",[n._v("nginx version: nginx/1.17.9")])])]),n._v(" "),e("p",[n._v("测试配置文件是否正确")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("sudo nginx -t\n")])])]),e("p",[n._v("停止nginx")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("sudo systemctl stop nginx\n")])])]),e("p",[n._v("启动")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("sudo systemctl start nginx\n")])])]),e("p",[n._v("查询nginx状态")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("sudo systemctl status nginx\n")])])]),e("p",[n._v("配置文件")]),n._v(" "),e("p",[n._v("放在 /etc/nginx/conf.d/ 目录下")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("server {\n     #SSL 访问端口号为 443\n     listen 443 ssl; \n     #填写绑定证书的域名\n     server_name unipop.biz; \n     # 防止中文乱码\n     charset utf-8;\n     #证书文件名称\n     ssl_certificate /etc/letsencrypt/live/unipop.biz/cert.pem; \n     #私钥文件名称\n     ssl_certificate_key /etc/letsencrypt/live/unipop.biz/privkey.pem; \n     ssl_session_timeout 5m;\n     #请按照以下协议配置\n     ssl_protocols TLSv1 TLSv1.1 TLSv1.2; \n     #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。\n     ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; \n     ssl_prefer_server_ciphers on;\n\terror_log /var/log/nginx/error.log;\n     location / {\n        #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。\n         #root /var/www/www.domain.com; \n        root   /opt/www; \n        index  index.html index.htm;\n        #proxy_pass http://35.215.156.120:8089/;\n     }\n\t\n     location /apis {\n            proxy_pass http://127.0.0.1:8089/;\n            proxy_set_header   Host    $host;\n            proxy_set_header   X-Real-IP   $remote_addr; \n            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_buffer_size  128k;\n\t\t  proxy_buffers   32 32k;\n            proxy_busy_buffers_size 128k;\n     }\n\n    error_page 404  /404.html;\n }\nserver {\n    listen 80;\n    #填写绑定证书的域名\n    server_name unipop.biz; \n    #把http的域名请求转成https\n    return 301 https://$host$request_uri; \n}\n")])])]),e("h1",{attrs:{id:"解决nginx转发后502问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决nginx转发后502问题"}},[n._v("#")]),n._v(" 解决Nginx转发后502问题")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("SELinux设置为开启状态（enabled）的原因。\n\n4.1、查看当前selinux的状态。\n\n1.    /usr/sbin/sestatus\n\n4.2、将SELINUX=enforcing 修改为 SELINUX=disabled 状态。\n\n1.    vi /etc/selinux/config\n\n2.     \n\n3.    #SELINUX=enforcing\n\n4.    SELINUX=disabled\n\n4.3、重启生效。reboot。\n\n")])])]),e("h1",{attrs:{id:"证书的申请和配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#证书的申请和配置"}},[n._v("#")]),n._v(" 证书的申请和配置")]),n._v(" "),e("p",[n._v("通过letsencrypt在服务器上申请，在通过上面的Nginx来配置。")])])}),[],!1,null,null,null);e.default=r.exports}}]);